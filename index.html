<!doctype html>
<html lang="fr" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <title>Niveau d'Eau - Port des Sablons</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="src/style.css">
  </head>
  <body
    class="h-screen overflow-hidden bg-[#0a0a0a] text-white relative"
    style="background-image:
      linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)),
      url('src/AdobeStock_527596924.jpeg');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;"
    x-data="waterLevelApp"
    x-init="init()"
  >
    <!-- background fixe -->
    <div
      class="fixed inset-0 -z-10"
      style="background-image: url('src/AdobeStock_527596924.jpeg');
             background-size: cover;
             background-position: center;"
    ></div>

    <!-- Vague coin (landscape) -->
    <div
      class="hidden landscape:block fixed top-0 left-0 w-[450px] h-[240px] pointer-events-none z-10"
      aria-hidden="true"
    >
      <svg viewBox="0 0 340 240" preserveAspectRatio="none" class="absolute inset-0 w-full h-full">
        <path fill="#121212" d="M0,0 L340,0 C300,60 250,75 200,105 C145,138 85,180 0,240 Z"></path>
      </svg>
      <div class="absolute inset-0 flex items-start justify-start p-4">
        <img
          src="src/logo_bretagneplaisance.svg"
          alt="Bretagne Plaisance"
          class="h-[90px] drop-shadow-[0_0_10px_rgba(255,255,255,0.3)] origin-top-left"
        />
      </div>
    </div>

    <!-- Header vague (portrait) -->
    <section class="portrait:block hidden relative w-full bg-[#121212] border-b border-white/25">
      <div class="flex items-center justify-center h-[140px] px-6 pt-4">
        <img
          src="src/logo_bretagneplaisance.svg"
          alt="Bretagne Plaisance"
          class="h-[100px] drop-shadow-[0_0_10px_rgba(255,255,255,0.3)]"
        />
      </div>
      <svg class="absolute left-0 bottom-[-50px] w-full h-[60px]" viewBox="0 0 1440 120"
           preserveAspectRatio="none" aria-hidden="true">
        <path fill="#121212"
              d="M0,40 C180,90 360,10 540,40 C720,70 900,120 1080,90 C1260,60 1440,35 1440,35 L1440,0 L0,0 Z">
        </path>
      </svg>
    </section>

    <!-- Contenu principal -->
    <main
      class="fade-in
             portrait:h-[calc(100vh-140px)] portrait:flex portrait:flex-col portrait:items-center portrait:justify-center
             portrait:max-w-[450px] portrait:mx-auto portrait:p-5
             landscape:grid landscape:grid-cols-1 landscape:place-items-center landscape:h-screen landscape:max-w-[1200px] landscape:mx-auto landscape:p-5"
    >
      <div
        class="relative bg-[#121212e0] border-2 border-white rounded-[25px]
               shadow-[0_0_20px_rgba(255,255,255,0.5),inset_0_0_20px_rgba(0,188,212,0.1)]
               flex flex-col justify-center text-center
               portrait:px-10 portrait:py-16 portrait:max-w-[500px] portrait:w-full portrait:mb-10
               landscape:px-10 landscape:py-10 landscape:max-w-[500px] landscape:w-full"
      >
        <div class="text-xl font-bold" x-text="t.waterLevelLabel"></div>

        <div class="flex flex-row justify-center items-center gap-6">
          <div>
            <div
              class="font-[RegionBretagneNew] text-[3.5rem] sm:text-[4.5rem] portrait:text-[5.5rem]
                     font-bold text-white drop-shadow-[0_0_10px_rgba(255,255,255,0.5)]
                      transition-opacity duration-300"
              :class="loading ? 'opacity-50 animate-pulse' : 'opacity-100'"
              x-text="formattedLevel"
            >
            </div>
          </div>

          <!-- statut / flèche tendance -->
          <div x-show="trendReady" class="flex items-center justify-center">
            <template x-if="trend === 'rising'">
              <svg width="64" height="64" viewBox="0 0 32 32" fill="none"
                   xmlns="http://www.w3.org/2000/svg">
                <path d="M16 28V6M16 6L8 14M16 6L24 14"
                      stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </template>
            <template x-if="trend === 'falling'">
              <svg width="64" height="64" viewBox="0 0 32 32" fill="none"
                   xmlns="http://www.w3.org/2000/svg">
                <path d="M16 4v22M16 26l8-8M16 26l-8-8"
                      stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </template>
            <template x-if="trend === 'stable'">
              <svg width="64" height="64" viewBox="0 0 32 32" fill="none"
                   xmlns="http://www.w3.org/2000/svg">
                <path d="M6 16h20" stroke="#fff" stroke-width="3" stroke-linecap="round"/>
                <path d="M24 16l-4-4M24 16l-4 4"
                      stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </template>
          </div>
        </div>

        <div class="text-lg opacity-90 font-light " x-text="t.unit"></div>
      </div>
    </main>

    <!-- Sélecteur langue -->
    <div
      class="fixed bottom-5 right-5 z-50 rounded-lg px-3 py-2 bg-black/40 backdrop-blur border border-white/10 text-sm flex items-center gap-1"
    >
      <button
        type="button"
        class="px-2 py-1 rounded text-white/70 hover:text-white hover:bg-white/10 transition
               font-normal cursor-pointer"
        :class="lang === 'fr' ? 'font-bold text-white' : ''"
        @click="setLang('fr')"
      >
        FR
      </button>
      <span class="text-white mx-1">|</span>
      <button
        type="button"
        class="px-2 py-1 rounded text-white/70 hover:text-white hover:bg-white/10 transition
               font-normal cursor-pointer"
        :class="lang === 'en' ? 'font-bold text-white' : ''"
        @click="setLang('en')"
      >
        EN
      </button>
    </div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
